# 테스트 주도 개발
다음 두 가지를 지키며 개발하는 것이 이 책의 주제이다.
- 어떤 코드건 작성하기 전에 실패하는 자동화된 테스트를 작성하라.
- 중복을 제거하라

## 테스트 주도 개발 패턴
1. 자동화된 테스트로 언제든 실행할 수 있으며 쉽게 결과를 확인할 수 있어야 한다. <br>
 -> 결과적으로 프로그램의 확신과 안정성이 증가하며, 개발 속도도 테스트를 작성하기 전보다 빠르다.
2. 각각의 테스트는 다른 테스트와 완전히 독립적이어야 한다.<br>
 -> 주어진 문제를 작은 단위로 분리하기 위해 노력해서 각 테스트를 실행하기 위한 환경을 쉽고 빠르게 세팅할 수 있다.
3. 초록 막대 상테에서는 한 번에 한 개만 수정한다. 이 때, 테스트를 통과하게 만드는 과정에서 생긴 새로운 테스트가 필요한 부분은 할일 목록에 적어놓는다.
4. 테스트를 작성할 때 단언(assert)은 제일 먼저 쓰고 시작한다. 
5. 테스트를 읽을 때 쉽고 따라가기 좋을 만한 데이터를 사용하자. <br>
 -> 여러 의미를 담는 동일한 상수를 쓰지 않는다. (e.g plus(1, 1) 보다 plus(1, 2)가 낫다)

## 빨강 막대 패턴
1. 테스트는 아는 것부터 작성하는 것으로 시작하자.
2. 테스트를 통해 설명을 요청하고 테스트를 통해 설명함으로써 자동화된 테스트가 더 널리 쓰이게 된다.
3. 시스템 장애가 발생하면, 그 장애로 인하여 실패하는 테스트, 그리고 통과할 경우엔 장애가 수정되었다고 볼 수 있는 테스트를 작성하자. <br>
 -> 이 테스트를 작성해야 한다는 사실을 어떻게 하면 시스템 장애가 보고되기 전에 알 수 있었을지 항상 생각해보자.

## 테스팅 패턴
1. 지나치게 큰 테스트는 여러 단계의 테스트 케이스로 재구성하고 하나씩 정복해나가자.
2. 비용이 많이 들거나 복잡한 리소스에 의존하는 객체를 테스트할 때는 모의 객체를 이용하자. <br>
 -> e.g 진짜 데이터베이스를 사용하지 않고 마치 데이터베이스인 것처럼 행동하지만 실제로는 메모리에만 존재하는 객체를 이용한다. <br>
 -> 모의객체의 사용은 가독성을 증가 시킨다.
3. 발생하기 힘든 에러 상황을 테스트할 때는 실제 작업을 수행하는 대신 그냥 예외를 발생시키기만 하는 특수한 객체를 만든다.
 -> 익명 내부 클래스는 ㅇ뤼가 테스트하기 원하는 적절한 메서드만이 오류를 발생시키게끔 하기 위해 유용하게 쓰인다.
~~~java
public void testFileSystemError() {
    File f = new File("foo") {
        public boolean createNewFile() throws IOException {
            throw new IOException();
        }        
    }
    ...
}
~~~
4. 혼자서 프로그래밍할 때 프로그래밍 세션은 마지막 테스트가 깨진 상태로 끝마치는 것을 시도해보자. <br> 
 -> 깨진 테스트를 보고 그 문장을 쓸 때 무슨 생각을 했는지 떠올리게 된다.

## 초록 막대 패턴
1. 가짜로 구현하기 <br>
 -> 실패하는 테스트를 만든 후 첫 번째 구현은 상수를 반환하게 하고, 테스트가 통과하면 상수를 변수로 변형하자 <br>
 -> 초록 막대 상태를 만드는 것은 확신을 심어주며, 현재 지점부터 리팩토링해 갈 수 있게 도와준다. <br>
 -> 하나의 구체적인 예에서 시작해서 일반화하게 되면, 쓰잘데기 없는 고민으로 때 이르게 혼동하는 일을 예방할 수 있다.  
2. 삼각측량법 <br>
 -> 값이 다른 여러 테스트를 작성하고, 이를 일반화하여 정답을 구현한다 <br>
 -> 올바르게 추상화할 것인지에 대한 판단이 어려울 때만 삼각측량을 사용하고, 그 외는 명백한 구현이나 까자로 구현하기에 의존하자.
3. 명백한 구현  <br>
 -> 단순한 연산들은 바로 구현해 버리자.
4. 하나에서 여럿으로 <br>
 -> 객체 컬렉션을 다루는 연산은 일단 컬렉션 없이 구현하고 그 다음에 컬렉션을 사용하게 만든다.

## xUnit 패턴
1. 단언을 이용해 프로그램이 자동으로 코드가 동작하는지 판단을 수행하도록 한다. 이 때, 단언은 구체적이어야 한다.
2. 픽스처 : 여러 테스트에서 공통으로 사용하는 객체들을 생성할 때는 setUp() 메서드를 재정의하여 인스턴스 변수들을 초기화하도록 한다.
3. 외부 픽스처 : 픽스처 중 외부 자원이 있을 경우 tearDown() 메서드를 재정의하여 자원을 해제한다.
4. 테스트는 'test'라는 이름으로 시작하고 테스트에 대한 짧은 아웃라인을 작성하자.
 > /* 터플 공간에 추가하기 */
5. 예외 테스트 : 예상되는 예외를 잡아서 무시하고, 예외가 발생하지 않은 경우에는 테스트가 실패하게 만든다.
~~~java
public void testRate() {
    try {
        exchange.findRate("USD", "GBP");
        fail();
    } catch (IllegalArgumentExcedption expected) {
        
    }
}
~~~
